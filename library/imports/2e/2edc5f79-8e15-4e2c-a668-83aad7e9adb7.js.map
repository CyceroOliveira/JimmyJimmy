{"version":3,"sources":["..\\..\\..\\..\\assets\\js/assets\\js\\game.js"],"names":["cc","Class","extends","Component","properties","starPreFab","default","type","Prefab","maxStarDuration","minStarDuration","ground","Node","player","scoreDisplay","Label","btn_play","scoreAudio","AudioClip","progressBar","ProgressBar","onLoad","score","progress","timer","starDuration","currentStar","running","x","spawnNewStar","start","getNewStarPosition","max","getComponent","jumpHeight","min","_position","y","randY","Math","floor","random","maxX","node","width","randX","v2","newStar","instantiate","addChild","setPosition","game","gainScore","string","toString","audioEngine","playEffect","gameOver","active","destroy","stopAllActions","update","dt"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\js","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        starPreFab:{\r\n          default: null,\r\n          type: cc.Prefab\r\n        },\r\n\r\n        maxStarDuration: 0,\r\n        minStarDuration: 0,\r\n\r\n        ground: {\r\n          default: null,\r\n          type: cc.Node\r\n        },\r\n\r\n        player: {\r\n          default: null,\r\n          type: cc.Node\r\n        },\r\n\r\n        scoreDisplay: {\r\n          default: null,\r\n          type: cc.Label\r\n        },\r\n\r\n        btn_play: {\r\n          default: null,\r\n          type: cc.Node\r\n        },\r\n\r\n        scoreAudio: {\r\n          default: null,\r\n          type: cc.AudioClip\r\n        },\r\n\r\n        progressBar: {\r\n          default: null,\r\n          type: cc.ProgressBar\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n      this.score = 0;\r\n\r\n      this.progressBar.progress = 1;\r\n\r\n      this.timer = 0;\r\n      this.starDuration = 0;\r\n\r\n      this.currentStar = null;\r\n      this.running = true;\r\n\r\n      this.btn_play.x = 3000;\r\n\r\n      this.spawnNewStar();\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    getNewStarPosition () {\r\n      var max = this.player.getComponent('player').jumpHeight;\r\n      var min = this.ground._position.y;\r\n\r\n      var randY = Math.floor(Math.random() * max + min);\r\n\r\n      var maxX = this.node.width / 2;\r\n      var randX = ((Math.random() - 0.5) * 2) * maxX;\r\n\r\n      return cc.v2(randX, randY);\r\n    },\r\n\r\n    spawnNewStar () {\r\n      var newStar = cc.instantiate(this.starPreFab);\r\n\r\n      this.node.addChild(newStar);\r\n\r\n      newStar.setPosition(this.getNewStarPosition());\r\n      newStar.getComponent('star').game = this;\r\n\r\n      this.starDuration = this.minStarDuration + Math.random() * (this.maxStarDuration - this.minStarDuration);\r\n      this.timer = 0;\r\n\r\n      this.currentStar = newStar;\r\n    },\r\n\r\n    gainScore () {\r\n      this.score += 1;\r\n\r\n      this.scoreDisplay.string = 'Score: ' + this.score.toString();\r\n\r\n      cc.audioEngine.playEffect(this.scoreAudio, false);\r\n    },\r\n\r\n    gameOver () {\r\n      this.player.active = false;\r\n      this.currentStar.destroy();\r\n      this.running = false;\r\n      this.btn_play.x = 0;\r\n      this.player.stopAllActions();\r\n      //cc.director.loadScene('game');\r\n    },\r\n\r\n    update (dt) {\r\n      if (!this.running) {\r\n        return;\r\n      }\r\n\r\n      if (this.timer > this.starDuration) {\r\n        this.gameOver();\r\n        return;\r\n      }\r\n\r\n      this.timer += dt;\r\n\r\n      if (this.score > 100) {\r\n\r\n      }\r\n    }\r\n});\r\n"]}